---
import Localizacion from '../icons/Localizacion.astro';
import Mail from '../icons/Mail.astro';
import LinkedIn from '../icons/LinkedIn.astro';
import Github from '../icons/Github.astro';
import Curriculum from '../icons/Curriculum.astro';
import Icons from '../ui/Icons.astro';

const { title, subtitle, location, email, isActive = true } = Astro.props;
---

<section
	class='flex flex-col md:flex-row gap-6 items-start mb-15 px-4 sm:px-6 md:px-8 lg:px-0'
>
	<figure class='relative shrink-0'>
		<img
			src={Astro.props.avatar}
			alt={`Foto de ${title}`}
			class='rounded-full w-24 sm:w-32 md:w-40 aspect-square'
			width='160'
			height='160'
		/>

		{
			isActive && (
				<span
					class='absolute bottom-1 right-[0.1rem] sm:bottom-4 sm:right-0.5 w-6 h-6 sm:w-8 sm:h-8 bg-emerald-500 rounded-full border-3 border-white animate-pulse-glow'
					title='En línea'
				/>
			)
		}
	</figure>

	<header class='text-left'>
		<h1 class='text-white text-3xl sm:text-4xl font-bold mb-1'>{title}</h1>
		<p class='text-lg sm:text-xl opacity-75 font-medium mb-2'>
			{subtitle}
		</p>

		<address class='flex items-center justify-start gap-2 mb-5 opacity-80'>
			<Localizacion class='size-5' />
			<span>{location}</span>
			<img
				width='20'
				height='20'
				src='/proyectos/peru.png'
				alt='Bandera de Perú'
				class='size-6'
			/>
		</address>

		<nav class='contact-links'>
			<ul class='flex flex-wrap justify-start items-center gap-5'>
				<li>
					<Icons
						href={`mailto:${email}`}
						class='flex items-center gap-2'
						aria-label={`Enviar correo a ${email}`}
					>
						<Mail class='size-5' />
						<span>{email}</span>
					</Icons>
				</li>

				<li>
					<ul class='flex gap-4'>
						<li>
							<Icons
								href='/cv.pdf'
								target='_blank'
								rel='noopener noreferrer'
								aria-label='Ver Curriculum'
							>
								<Curriculum class='size-5' />
							</Icons>
						</li>
						<li>
							<Icons
								href='https://github.com/AndyGonzalesCastillo'
								aria-label='Perfil de GitHub'
							>
								<Github class='size-5' />
							</Icons>
						</li>
						<li>
							<Icons
								href='https://www.linkedin.com/in/andy-rodrigo-gonzales-castillo-18a696347/'
								aria-label='Perfil de LinkedIn'
							>
								<LinkedIn class='size-4' />
							</Icons>
						</li>
					</ul>
				</li>
			</ul>
		</nav>
	</header>
</section>

<style>
	@keyframes pulse-glow {
		0% {
			opacity: 0.85;
			box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.7);
		}
		70% {
			opacity: 1;
			box-shadow: 0 0 0 10px rgba(16, 185, 129, 0);
		}
		100% {
			opacity: 0.85;
			box-shadow: 0 0 0 0 rgba(16, 185, 129, 0);
		}
	}

	.animate-pulse-glow {
		animation: pulse-glow 2s infinite;
	}

	.contact-links a {
		position: relative;
		overflow: hidden;
	}

	.contact-links a::after {
		content: '';
		position: absolute;
		bottom: -2px;
		left: 0;
		width: 0;
		height: 1px;
		background-color: white;
		transition: width 0.3s ease;
	}

	.contact-links a:hover::after {
		width: 100%;
	}
</style>
